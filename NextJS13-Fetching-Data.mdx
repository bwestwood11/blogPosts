---
title: "Everything You Need To Know About NextJS 13 Data Fetching inside the App Router"
date: "2023-06-06"
tags: ['next.js', 'nextjs']
cover_image: '/datafetching.png'
category: 'NextJS 13'
description: 'Use the new, simplified data feching system built on React and the Web platform ...'
---

Fetching data inside the new Next.js **App Router** is now easier than ever. The new data fetching system is built on React and the Web platform, and it's designed to enable more flexibility and control over data fetching. It also makes it easier to build apps that work offline and on slow networks.

## There are four main concepts to always consider when fetching data with the Fetch API:

1. Fetch data on the server using Server Components. (All components are server components by default.)
2. Fetch data in parallel to minimize waterfalls and loading times.
3. Fetch data where it's used. Next.js will automatically dedupe requests in a tree.
4. Use Loading UI, Streaming and Suspense to progressively render a page and improve the user experience.

Let's go over an example of how to fecth data on a server component. We will be using **jsonplaceholder.typicode.com** to fetch data from. This will give us dummy data to practice with HTTP requests.


/libs/getUsers.jsx file
```
export default async function getUsers() {
  const response = await fetch('https://jsonplaceholder.typicode.com/users');

  if(!response.ok) {
    throw new Error('Failed to fetch users');
}

  return response.json();
}
```

/users page.jsx
```
import Link from "next/link";
import getUsers from '../../libs/getUsers'


export default async function Users() {
  const users = await getUsers();
  return (
    <div className="text-center w-full mx-auto pt-8">
      <Link href="/">Back to home</Link>
        <h1 className="text-4xl font-bold mb-8 underline">Users</h1> 
       
        {users.map((user) => {
          return (
            <>
            <p key={user.id}>
           <Link href={`/users/${user.id}`}>   
            {user.name}
           </Link> 
           </p> 
            </>
          )
        })}
    </div>
  )
}
```

Results of the code above: 
<CustomImage src='https://raw.githubusercontent.com/bwestwood11/blogPosts/main/images/users.jpg' alt='fetching-code' priority  / >

We have successful fetched all the users from the API and displayed them on the page.

Now let's take it a step further. We want to fetch each user's information when we click on their name. 

This information will be fetched as dynamic routes. So, we must create a dynamic route inside of the users directory with square brackets. 
Whatever you name the file inside of the square brackets will be the name of the dynamic route. 
For example: [id] will be the name of the dynamic segment and also the name of the parameter that will be passed to the page.

We can fetch the users information dynamically inside of a getUser function. 
```
export default async function getUser(id) {

  const response = await fetch(`https://jsonplaceholder.typicode.com/users/${id}`);

  if(!response.ok) {
    throw new Error('Failed to fetch users');

    return response.json(); 
}
}
```

Now we can use the getUser function to fetch the user's information on the dynamic page. 

/users/[id].jsx
```
import getUser from '../../libs/getUser'

export default async function UserPage({ params: {id}}) {

  const user = await getUser(id);

  return (
    <div className="text-center w-full mx-auto pt-8">
      <Link href="/users">Back to users</Link>
        <h1 className="text-4xl font-bold mb-8 underline">User</h1> 
        <p>{user.name}</p>
        <p>{user.email}</p>
    </div>
  )
}
```






